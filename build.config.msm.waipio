################################################################################
## Defaulting required variables
[ -z "${VARIANT}" ] && VARIANT=default
[ -z "${CONFIG_TARGET}" ] && CONFIG_TARGET=msm.waipio

################################################################################
## Inheriting configs from ACK
. ${ROOT_DIR}/common/build.config.common
. ${ROOT_DIR}/common/build.config.aarch64

################################################################################
## Variant setup
MSM_ARCH=waipio
BRANCH=msm-waipio
VARIANTS=(gki)

BOOT_IMAGE_HEADER_VERSION=2
BASE_ADDRESS=0x80000000
PAGE_SIZE=4096

ABI_DEFINITION=abi_gki_aarch64.xml
KMI_WHITELIST=abi_gki_qcom_whitelist

################################################################################
## Inheriting MSM configs
. ${KERNEL_DIR}/build.config.msm.common

case "${VARIANT}" in
gki)
	. ${KERNEL_DIR}/build.config.msm.gki
	apply_defconfig_fragment ${KERNEL_DIR}/arch/${ARCH}/configs/vendor/${MSM_ARCH}_GKI.config vendor/${MSM_ARCH}-gki_defconfig
	;;
gki-ack)
	# In gki-only, then using ACK's GKI config directly
	. ${KERNEL_DIR}/build.config.gki
	;;
*)
	echo "Unsupported variant '${VARIANT}'"
	;;
esac
